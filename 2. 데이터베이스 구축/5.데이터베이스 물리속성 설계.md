# 데이터베이스 물리속성 설계
## 파티셔닝
### 개념
- 데이터베이스의 특정 부분(데이터)을 여러 섹션으로 분할하는 방법
- 대용량 데이터의 조회 속도 향상, 관리 용이성, 성능 및 가용성 향상을 위해 사용

### 샤딩(Sharding)
- 거대한 데이터베이스나 시스템을 작은 조각(샤드)으로 나누어 분산 저장 및 관리하는 기법
- 데이터의 크기가 매우 클 때 효과적
=> 파티셔닝: 단일 컴퓨터에서(하나의 데이터베이스)내에서 사용/ 샤딩: 분산데이터베이스에서 사용

### 파티셔닝의 장/단점
- 장점
  - 데이터 가용성 향상
  - 파티션별 독립적인 백업 및 복구 가능
  - 성능 향상
- 단점
  - 테이블 간의 조인 비용 증가
  - 테이블과 인덱스는 동일한 파티션 전략을 따라야함

### 파티셔닝의 종류
- 수평 분할(Horizontal Partitioning)
  - 테이블의 행을 기준으로 분할
  - 스키마를 복제한 후 샤드키를 기준으로 데이터를 나눔
- 수직 분할(Vertical Partitioning)
  - 테이블의 컬럼을 기준으로 분할하여 성능 향상
  - 자주 사용하는 컬럼 등을 분리시켜 성능을 향상
  - 하나의 테이블을 2개 이상으로 분리하는 작업

### 분할 기준 (종류 알아두기!!)
- 범위 분할(Range Partitioning)
  - Partition Key의 연속된 범위로 파티션을 정의
  - ex)월별,분기별 등
- 목록 분할(List Partitioning)
  - 특정 Partition에 저장될 Data에 대한 명시적 제어
- 해시 분할(Hash Partitioning)
  - 파티션 키 값에 해시 함수를 적용하고, 거기서 반환된 값으로 파티션 매핑
  - 데이터가 모든 파티션에 고르게 분산되도록 DBMS가 관리
  - 병렬처리 시 성능효과 극대화
- 라운드 로빈 분할(Round Robin Partitioning)
  - 데이터를 균일하게 분배해서 저장하는 방식
- 합성 분할(Composite Partitioning)
  - 위의 기술들을 복합적으로 사용하는 방법

## 클러스터 설계
### 개념
- 자주 사용되는 테이블의 데이터를 디스크 상 동일한 위치에 저장하여 데이터 책세스 효율을 향상시키는 물리적 저장 방법

## 인덱스(Index)
### 개념
- 데이터베이스 테이블 검색 속도 향상을 위한 저장 공간 활용 자료구조
- 책의 색인과 유사하며 빠른 조회를 위해 데이터 위치 정보를 포함

### 인덱스를 사용하는 이유
- 대규모 테이블에서의 <u>빠른 데이터 추출</u>
- 조건 검색, 정렬, MIN/MAX 처리의 효율 향상
- JOIN시 열 추출 효율성

### 인덱스의 종류
- 클러스터 인덱스
  - 테이블당 1개만 허용되며, 해당 컬럼을 기준으로 테이블이 물리적으로 정렬
  - 기본적으로 오름차순으로 정렬
  - 기본키를 설정하면 자동으로 클러스터드 인덱스 적용
  - 인덱스 자체의 리프 페이지가 곧 데이터
  - 데이터 입력, 수정, 삭제 시 항상 정렬 상태 유지
  - 넌 클러스터형 인덱스보다 검색 속도는 빠르나, 데이터 입력, 수정, 삭제 시에는 느림
- 넌클러스터 인덱스
  - 테이블당 약 240개의 인덱스 생성 가능
  - 레코드의 원본은 정렬되지 않고, 인덱스 페이지만 정렬
  - 인덱스 자체의 리프 페이지는 데이터가 아니라 데이터가 위치하는 포인터(RID)이기 때문에 클러스터형보다 검색 속도는 더 느리지만 데이터의 입력, 수정, 삭제는 더 빠름
  - 인덱스를 생성할 때 데이터 페이지는 그냥 둔 상태에서 별도의 인덱스 페이지를 따로 만들기 때문에 용량을 더 차지함
- 밀집 인덱스
  - 데이터 레코드 각각에 대해 하나의 인덱스가 만들어짐
- 희소 인덱스
  - 레코드 그룹 또는 데이터 블록에 대해 하나의 인덱스가 만들어짐
