# 물리데이터 모델 품질 검토
## CRUD 분석
- 데이터 처리 기능인 <u>Create(생성),Read(읽기),Update(갱신),Delete(삭제)</u>를 묶어서 표현한 말
- 시스템 구축 시 프로세스와 DB에 저장되는 데이터 사이의 의존관계를 표현하는 표
- 시스템을 구축하기 위해 해당 업무에 어떤 데이터가 존재하는지 무엇이 영향을 받는지 분석
- 데이터베이스에 영향을 주는 생성,읽기,갱신,삭제 연산으로 프로세스와 테이블 간에 매트릭스를 만들어서 **트랜잭션**을 분석

### CRUD의 필요성
- 모델링 작업 검증
  - 데이터  모델링과 프로세스 모델링이 정확하게 수행되었는지 확인하는 데 사용
- 중요 산출물
  - 시스템 구축 단계에서의 중요한 참고 자료로 활용되며, 구축되는 시스템의 데이터 처리를 명확히 정의
- 테스트 시 사용
- 인터페이스 현황 파악

## 옵티마이저 (아직까지 출제된적 없음)
### SQL 처리 흐름
- 구문분석(Parsing) -> 실행(Execution) -> 인출(Fetch)
- 구문분석
  - 사용자가 제출한 SQL문이 데이터베이스에서 이미 사용된 적이 있는지 확인
- 실행단계
  - SQL문에서 참조된 데이터가 '데이터 버퍼 캐시'영역에 있는지 검사
- 추출단계
  - 실행단계가 완료되면, 서버 프로세스는 데이터 ㅂ버퍼 캐시 영역에서 관련 데이터를 읽어 사용자에게 '전달'

### 개념
- SQL문에 대한 최적의 실행 방법을 결정
### 구분
- 규칙기반 옵티마이저(Rule Based Optimizer)
  - 규칙(우선순위)을 가지고 실행계획을 생성
  - 인덱스 유무, 연산자 객체 등을 참조하여 '우선순위' 부여
- 비용기반 옵티마이저(Cost Based Optimizer)
  - SQL문을 처리하는데 필요한 비용이 가장 적은 실행계획을 선택하는 방식
  - 테이블, 인덱스, 컬럼등의 다양한 객체 '통계정보와 시스템 '통계정보' 활용

## SQL 성능 튜닝
### 개념
- SQL문을 최적화하여 시스템의 처리량과 응답 속도를 개선하는 작업
### 튜닝 영역
- 데이터베이스 설계 튜닝
- 데이터 베이스 환경
- <u>SQL 문장 튜닝</u>

### Row Migration/Row Chaining
- Row Migration
  - 데이터가 수정되면서 데이터가 더 커져서 기존 블록(Block)에 못 들어가는 경우 다른 블룩에 데이터를 넣고, 기존 블록 위치에는 링크를 남김
- Row Chaining
  - 컬럼이 너무 길어서 DB BLOCK 사이즈보다 길어진 경우 블록 두 개에 이어서 한 ROW가 저장


# 분산 데이터베이스
## 분산 데이터베이스
### 정의
- 여러곳에 분산된 데이터베이스를 하나의 논리적인 시스템처럼 사용할 수 있는 데이터베이스
### 구성요소
- **분산 처리기**
  - 지리적으로 분산된 컴퓨터 시스템
- **분산 데이터 베이스**
  - 지리적으로 분산된 데이터베이스
- **통신 네트워크**
  - 분산처리기들을 연결하여 하나의 시스템처럼 작동시키는 네트워크

### 적용 기법
- 테이블 위치 분산
  - 설계된 테이블의 위치를 각각 다르게 위치시키는 것
  - 테이블의 구조가 변하지 않고, 데이터 베이스에 중복되어 생성되지 않음
- 테이블 분할(Fragmentation)분산
  - 각각의 테이블을 쪼개어 분산하는 방법
  - 수평분할
    - 테이블을 특정 칼럼의 값을 기준으로 로우(Row)를 분리
    - 컬럼은 분리되지 않음
  - 수직분할
    - 테이블 칼럼을 기준으로 컬럼(Column)을 분리
- 테이블 복제(Replication) 분산
  - 동일한 테이블을 다른 지역이나 서버에서 동시에 생성하여 관리하는 유형
  - 부분 복제(Segment)
    - 테이블의 일부의 내용만 다른 지역이나 서버에 복제
  - 광역 복제(Broadcast)
    - 테이블의 내용을 각 지역이나 서버에 복제
  - 테이블 요약(Summarization)분산
    - 지역 간 또는 서버 간에 데이터가 비슷하지만 서로 다른 유형으로 존재
    - 분석 요약(Rollup)
      - 각 지역별로 존재하는 요약정보를 '마스터에 통합'하여 다시 전체에 대해서 요약정보를 산출하는 분산방법
    - 통합 요약(Consolidation)
      - 각 지역별로 존재하는 '다른 정보'를 마스터에 통합하여 다시 전체에 대해서 요약 정보를 산출하는 분산방법


### 투명성 조건★★★
- 위치 투명성(Location)
  - 데이터의 실제 위치를 모르고 논리적 명칭마으로 액세스 가능
- 분할 투명성(Division)
  - 여러 단편으로 분할된 논리적 테이블 관리
- 지역사상 투명성(Local Mapping)
  - 지역 DBMS와 물리적 DB사이의 Mapping 보장
  - 각 지역 시스템 이름과 무관한 이름 사용 가능
- 중복 투명성(Replication)
  - 동일 데이터의 중복을 사용자에게 숨김
- 병행 투명성(Concurrency)
  - 다수의 트랜잭션들이 동시에 실행되더라도 서로 영향을 주지 않음
- 장애 투명성(Failure)
  - 다양한 장애에도 트랜잭션 정확하게 처리

### CAP 이론
- 어떤 분산환경에서도 일관성(C), 가용성(A), 분단 허용성(P) 세가지 속성 중, **두 가지만 가질 수 있다는 것**
- 세 가지 모두 만족할 수 없음
### 의미
- 일관성(Consistency)
  - 시스템의 모든 노드가 어떤 특정 시점에서 동일한 데이터를 보유하고 있어야 함
  - 한 노드에서 데이터가 변경되면 모든 노드에 걸쳐 즉시 그 변경사항이 반영되어야 함
- 가용성(Availability)
  - 모든 요청에 대해 시스템이 항상 응답을 해야 함
- 분단 허용성(Partition Tolerance)
  - 네트워크 분할이 발생하더라도 시스템 전체의 작동이 중단되지 않아야 함

## 트랜잭션★★★
- 데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하는 작업 단위
- 여러 연산이 모두 함께 수행되어야 할 때 사용되며, 이들은 하느이 트랜잭션으로 묶임

### 성질 (A C I D) 
- 원자성(Atomicity)★
  - 트랜잭션 내의 모든 연산은 모두 반영되거나 아니면 전혀 반영되지 않아야 함
  - 오류 발생 시 트랜잭션 전체가 취소되며, Commit과 Rollback 명령어에 의해 이 성질이 보장
- 일관성(Consistency)
  - 트랜잭션의 완료 후에는 데이터베이스가 일관된 상태를 유지해야 함
- 독립성,격리성(Isolation)
  - 동시에 실행되는 여러 트랜잭션들은 서로 간섭할 수 없으며, 각각 독립적으로 실행되어야 함
- 영속성(Durability)
  - 트랜잭션이 한번 Commit되면, 그 결과는 시스템에 고장이 발생해도 영구적으로 반영되어야 함

### 트랜잭션의 상태
- 활동(Active)
- 실패(Failure)
- 철회(Aborted)
  - 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태
- 부분 완료(Partially Committed)★
  - 트랜잭션의 마지막 연산까지 실행했지만, <u>Commit 연산이 실행되기 직전</u>의 상태
- 완료(Committed)

